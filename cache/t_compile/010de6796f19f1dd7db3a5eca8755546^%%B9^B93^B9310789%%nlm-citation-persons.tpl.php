<?php /* Smarty version 2.6.26, created on 2016-02-03 14:00:12
         compiled from nlm-citation-persons.tpl */ ?>
<?php require_once(SMARTY_CORE_DIR . 'core.load_plugins.php');
smarty_core_load_plugins(array('plugins' => array(array('modifier', 'escape', 'nlm-citation-persons.tpl', 14, false),)), $this); ?>
<?php echo ''; ?><?php $_from = $this->_tpl_vars['persons']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array'); }$this->_foreach['persons'] = array('total' => count($_from), 'iteration' => 0);
if ($this->_foreach['persons']['total'] > 0):
    foreach ($_from as $this->_tpl_vars['personIndex'] => $this->_tpl_vars['person']):
        $this->_foreach['persons']['iteration']++;
?><?php echo ''; ?><?php if (( count ( $this->_tpl_vars['persons'] ) <= 3 || ($this->_foreach['persons']['iteration'] <= 1) ) && is_a ( $this->_tpl_vars['person'] , 'MetadataDescription' )): ?><?php echo ''; ?><?php ob_start(); ?><?php echo ''; ?><?php if ($this->_tpl_vars['person']->getStatement('prefix')): ?><?php echo ''; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['person']->getStatement('prefix'))) ? $this->_run_mod_handler('escape', true, $_tmp) : $this->_plugins['modifier']['escape'][0][0]->smartyEscape($_tmp)); ?><?php echo ' '; ?><?php endif; ?><?php echo ''; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['person']->getStatement('surname'))) ? $this->_run_mod_handler('escape', true, $_tmp) : $this->_plugins['modifier']['escape'][0][0]->smartyEscape($_tmp)); ?><?php echo ''; ?><?php if ($this->_tpl_vars['person']->getStatement('suffix')): ?><?php echo ' '; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['person']->getStatement('suffix'))) ? $this->_run_mod_handler('escape', true, $_tmp) : $this->_plugins['modifier']['escape'][0][0]->smartyEscape($_tmp)); ?><?php echo ''; ?><?php endif; ?><?php echo ''; ?><?php $this->_smarty_vars['capture']['default'] = ob_get_contents();  $this->assign('surname', ob_get_contents());ob_end_clean(); ?><?php echo ''; ?><?php ob_start(); ?><?php echo ''; ?><?php $_from = $this->_tpl_vars['person']->getStatement('given-names'); if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array'); }$this->_foreach['givenNames'] = array('total' => count($_from), 'iteration' => 0);
if ($this->_foreach['givenNames']['total'] > 0):
    foreach ($_from as $this->_tpl_vars['givenName']):
        $this->_foreach['givenNames']['iteration']++;
?><?php echo ''; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['givenName'])) ? $this->_run_mod_handler('escape', true, $_tmp) : $this->_plugins['modifier']['escape'][0][0]->smartyEscape($_tmp)); ?><?php echo ''; ?><?php if (! ($this->_foreach['givenNames']['iteration'] == $this->_foreach['givenNames']['total'])): ?><?php echo ' '; ?><?php endif; ?><?php echo ''; ?><?php endforeach; endif; unset($_from); ?><?php echo ''; ?><?php $this->_smarty_vars['capture']['default'] = ob_get_contents();  $this->assign('givenName', ob_get_contents());ob_end_clean(); ?><?php echo ''; ?><?php if (count ( $this->_tpl_vars['persons'] ) <= 3 && ! ($this->_foreach['persons']['iteration'] <= 1) && ! ($this->_foreach['persons']['iteration'] == $this->_foreach['persons']['total'])): ?><?php echo ', '; ?><?php elseif (! ($this->_foreach['persons']['iteration'] <= 1)): ?><?php echo ' '; ?><?php endif; ?><?php echo ''; ?><?php if (($this->_foreach['persons']['iteration'] <= 1) && ! $this->_tpl_vars['editor']): ?><?php echo ''; ?><?php echo $this->_tpl_vars['surname']; ?><?php echo ', '; ?><?php echo $this->_tpl_vars['givenName']; ?><?php echo ''; ?><?php if (count ( $this->_tpl_vars['persons'] ) > 1): ?><?php echo ','; ?><?php endif; ?><?php echo ''; ?><?php else: ?><?php echo ''; ?><?php if (($this->_foreach['persons']['iteration'] == $this->_foreach['persons']['total']) && count ( $this->_tpl_vars['persons'] ) > 1): ?><?php echo 'and '; ?><?php endif; ?><?php echo ''; ?><?php echo $this->_tpl_vars['givenName']; ?><?php echo ' '; ?><?php echo $this->_tpl_vars['surname']; ?><?php echo ''; ?><?php endif; ?><?php echo ''; ?><?php if (($this->_foreach['persons']['iteration'] == $this->_foreach['persons']['total'])): ?><?php echo '. '; ?><?php endif; ?><?php echo ''; ?><?php elseif (($this->_foreach['persons']['iteration'] == $this->_foreach['persons']['total'])): ?><?php echo ''; ?><?php echo ' et al. '; ?><?php echo ''; ?><?php endif; ?><?php echo ''; ?><?php endforeach; endif; unset($_from); ?><?php echo ''; ?>
